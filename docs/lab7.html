<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Andrew Yuanzhou Wang" />

<meta name="date" content="2025-11-06" />

<title>Lab 7 - Midterm Review</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/paper.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="custom.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Andrew Wang</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">About</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    CS&amp;SS 321
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="teaching.html">Overview</a>
    </li>
    <li>
      <a href="lab1.html">Week 1</a>
    </li>
    <li>
      <a href="lab2.html">Week 2</a>
    </li>
    <li>
      <a href="lab3.html">Week 3</a>
    </li>
    <li>
      <a href="lab4.html">Week 4</a>
    </li>
    <li>
      <a href="lab5.html">Week 5</a>
    </li>
    <li>
      <a href="lab6.html">Week 6</a>
    </li>
    <li>
      <a href="lab7.html">Week 7</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Research
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="research.html">Papers</a>
    </li>
    <li>
      <a href="CV.html">CV</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Toys
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="simmodel.html">Protest-Repression Model</a>
    </li>
    <li>
      <a href="pdlparking.html">Should I Pay to Park in PDL?</a>
    </li>
    <li>
      <a href="regplot.html">Visualizing Multiple Regression</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Lab 7 - Midterm Review</h1>
<h4 class="author">Andrew Yuanzhou Wang</h4>
<h4 class="date">2025-11-06</h4>

</div>

<div id="TOC">
<ul>
<li><a href="#instructions" id="toc-instructions"><span
class="toc-section-number">1</span> Instructions</a></li>
<li><a href="#part-i-causal-inference"
id="toc-part-i-causal-inference"><span
class="toc-section-number">2</span> Part I — Causal Inference</a></li>
<li><a href="#part-ii-prediction" id="toc-part-ii-prediction"><span
class="toc-section-number">3</span> Part II — Prediction</a></li>
</ul>
</div>

<div id="instructions" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Instructions</h1>
<p>There are two parts: Part I (Causal Inference), Part II (Prediction).
Use clear causal language and avoid causal claims for purely predictive
models. Show work for any calculations.The data and required libraries
are loaded with the chunk below.</p>
<pre class="r"><code>data(Seatbelts, package = &quot;datasets&quot;)
data(swiss, package = &quot;datasets&quot;)
sb_df &lt;- cbind.data.frame(as.data.frame(Seatbelts))
sb_df$year &lt;- rep(1969:1984, each = 12)
sb_df$month &lt;- rep(1:12, times = 16)

sw &lt;- swiss</code></pre>
</div>
<div id="part-i-causal-inference" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Part I — Causal
Inference</h1>
<p>Research Question: Did the introduction of the 1983 seat belt law in
the UK reduce the number of monthly driver fatalities?</p>
<blockquote>
<p>Dataset: Seatbelts</p>
<ul>
<li><code>DriversKilled</code> (monthly count)</li>
<li><code>law</code> (0 = before Jan 1983, 1 = after)</li>
<li><code>month</code></li>
<li><code>kms</code> (traffic volume)</li>
<li><code>PetrolPrice</code></li>
<li><code>VanKilled</code></li>
</ul>
</blockquote>
<ol style="list-style-type: decimal">
<li>Research Design &amp; Concepts</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>What should we set as the outcome variable? What about the treatment
variable?</li>
<li>What is the unit of analysis?</li>
<li>Why is this considered an observational rather than experimental
study?</li>
</ol>
<ol start="2" style="list-style-type: decimal">
<li>Average Causal Effect — Difference in Means Write R code to estimate
the difference in average DriversKilled before and after the law change.
You may use any method you know but <code>tapply()</code> is
recommended.</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>What quantity does this code estimate?</li>
<li>In 2–3 sentences, explain why this estimate might be biased.</li>
</ol>
<ol start="3" style="list-style-type: decimal">
<li>Simple Linear Regression Interpretation Suppose you estimate:</li>
</ol>
<pre class="r"><code>m1 &lt;- lm(DriversKilled ~ law, data = sb_df)
summary(m1)</code></pre>
<pre><code>## 
## Call:
## lm(formula = DriversKilled ~ law, data = sb_df)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -46.870 -17.870  -5.565  14.130  72.130 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  125.870      1.849  68.082  &lt; 2e-16 ***
## law          -25.609      5.342  -4.794 3.29e-06 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 24.03 on 190 degrees of freedom
## Multiple R-squared:  0.1079, Adjusted R-squared:  0.1032 
## F-statistic: 22.98 on 1 and 190 DF,  p-value: 3.288e-06</code></pre>
<ol style="list-style-type: lower-alpha">
<li>Write the fitted regression equation.</li>
<li>Interpret the coefficients clearly in terms of this study.</li>
<li>Can this coefficient be interpreted as a causal effect? Why or why
not? Which variable(s) might be a confounder?</li>
</ol>
<ol start="4" style="list-style-type: decimal">
<li><p>Confounding &amp; Observational Design Name one specific variable
that could confound the relationship between law and DriversKilled.
Explain why it is a confounder.</p></li>
<li><p>External Validity Would you expect this result to generalize to
other countries? Would it generalize to the modern-day? Explain why or
why not using correct causal language.</p></li>
</ol>
</div>
<div id="part-ii-prediction" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Part II —
Prediction</h1>
<p>Research Question: Can socio-economic indicators predict fertility
rates in Swiss provinces?</p>
<blockquote>
<p>Dataset: <code>swiss</code></p>
<ul>
<li><code>province</code></li>
<li><code>Fertility</code></li>
<li><code>Education</code></li>
<li><code>Catholic</code></li>
<li><code>Agriculture</code></li>
<li><code>Infant.Mortality</code></li>
</ul>
</blockquote>
<ol start="6" style="list-style-type: decimal">
<li>Direction &amp; Strength of Relationship Consider this scatter plot
of Fertility vs Education.</li>
</ol>
<pre class="r"><code>plot(Fertility ~ Education, data = sw,
xlab = &quot;Education (%) beyond primary (men)&quot;,
ylab = &quot;Standardized Fertility&quot;)</code></pre>
<p><img src="lab7_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<ol style="list-style-type: lower-alpha">
<li>Draw a line of best fit by hand. Is the relationship positive or
negative?</li>
<li>Does it look strong or weak?</li>
<li>Does this plot alone tell us if education causes lower fertility?
Explain.</li>
</ol>
<ol start="7" style="list-style-type: decimal">
<li>Simple Regression with lm() Using <code>lm()</code>, write a script
to model the effect of education quality on fertility.</li>
</ol>
<pre><code>## 
## Call:
## lm(formula = Fertility ~ Education, data = sw)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -17.036  -6.711  -1.011   9.526  19.689 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  79.6101     2.1041  37.836  &lt; 2e-16 ***
## Education    -0.8624     0.1448  -5.954 3.66e-07 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 9.446 on 45 degrees of freedom
## Multiple R-squared:  0.4406, Adjusted R-squared:  0.4282 
## F-statistic: 35.45 on 1 and 45 DF,  p-value: 3.659e-07</code></pre>
<p>Assume the output shows: <span class="math inline">\(\hat{\alpha} =
79.6\)</span>, <span class="math inline">\(\hat{\beta} =
-0.86\)</span>.</p>
<ol style="list-style-type: lower-alpha">
<li>Write the fitted line.</li>
<li>Interpret <span class="math inline">\(\hat{\beta}\)</span>: If
<code>Education</code> increases by 1 unit (1 percentage point of men
with post-primary education), how does predicted <code>fertility</code>
change?</li>
<li>Predict <code>fertility</code> when <code>Education</code> =
15.</li>
</ol>
<ol start="8" style="list-style-type: decimal">
<li>Multiple Regression: Adding Control Variables Now predict
<code>fertility</code> using <code>Education</code>,
<code>Catholic</code>, and <code>Infant.Mortality</code>. Write a script
to evaluate the model, then write out the fitted equation using:</li>
</ol>
<pre><code>## 
## Call:
## lm(formula = Fertility ~ Education + Catholic, data = sw, subset = Infant.Mortality)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -6.8511 -2.4434  0.4041  2.8316 10.9581 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 65.89808    1.03559  63.633  &lt; 2e-16 ***
## Education   -0.46979    0.06553  -7.169 6.46e-09 ***
## Catholic     0.21073    0.04126   5.107 6.76e-06 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 3.886 on 44 degrees of freedom
## Multiple R-squared:  0.6288, Adjusted R-squared:  0.6119 
## F-statistic: 37.27 on 2 and 44 DF,  p-value: 3.397e-10</code></pre>
<ol style="list-style-type: lower-alpha">
<li>Why might we add more predictors in a prediction-focused model? Why
might we not want to add too many?</li>
<li>If the magnitude of <span class="math inline">\(\hat{\beta}\)</span>
for Education changes after adding variables, what does that suggest (in
terms of confounding or omitted variable bias)?</li>
<li>Why is this not a causal study?</li>
<li>Explain the difference between predicting fertility and estimating
causal effects of education on fertility. Why would it be inappropriate
to say “increasing education will cause fertility to fall” based only on
this regression?</li>
</ol>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
